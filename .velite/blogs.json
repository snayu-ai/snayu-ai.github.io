[
  {
    "slug": "blog/any-considered-harmful-except-for-these-cases",
    "title": "`any` Considered as harmful, except for these cases",
    "description": "Discover when it's appropriate to use Typescript's `any` type despite its risks. Learn about legitimate cases where `any` is necessary",
    "date": "2024-05-30T00:00:00.000Z",
    "published": true,
    "image": "/images/blog/any-considered.webp",
    "author": "devbertskie",
    "body": "const{Fragment:l,jsx:e,jsxs:n}=arguments[0];function _createMdxContent(o){const r={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",p:\"p\",pre:\"pre\",span:\"span\",...o.components};return n(l,{children:[n(r.p,{children:[e(r.code,{children:\"any\"}),\" is an extremely powerful type in TypeScript. It lets you treat a value as if you were in JavaScript, not TypeScript. This means that it disables all of TypeScript's features - type checking, autocomplete, and safety.\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" myFunction\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  input.\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\"someMethod\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"();\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#50FA7B\"},children:\"myFunction\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"abc\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"); \"}),e(r.span,{style:{color:\"#6272A4\"},children:\"// This will fail at runtime!\"})]})]})})}),\"\\n\",n(r.p,{children:[\"Using \",e(r.code,{children:\"any\"}),\" is rightly considered harmful by most of the community. There are \",e(r.a,{href:\"https://typescript-eslint.io/rules/no-explicit-any/\",children:\"ESLint rules\"}),\" to prevent its use. This can turn developers off using \",e(r.code,{children:\"any\"}),\" entirely.\"]}),\"\\n\",n(r.p,{children:[\"However, there are a few advanced cases where \",e(r.code,{children:\"any\"}),\" is always the right choice. Here are some of them:\"]}),\"\\n\",e(r.h2,{id:\"type-argument-constraints\",children:e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#type-argument-constraints\",children:\"Type Argument Constraints\"})}),\"\\n\",n(r.p,{children:[\"Let's imagine we wanted to implement the \",e(r.code,{children:\"ReturnType\"}),\" utility in TypeScript. This utility takes a function type and returns the type of its return value.\"]}),\"\\n\",n(r.p,{children:[\"We need to create a \",e(r.a,{href:\"https://www.totaltypescript.com/no-such-thing-as-a-generic#generic-types\",children:\"generic type\"}),\" which takes a function type as a type argument. If we restricted ourselves to not use \",e(r.code,{children:\"any\"}),\", we might use \",e(r.code,{children:\"unknown\"}),\":\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"T\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"...\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"args\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" unknown\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"[]) \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" unknown\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"> \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#6272A4\"},children:\"  // Not important for our explanation:\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"  T\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"...\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"args\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" unknown\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"[]) \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" infer\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" R\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" R\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" never\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]})]})})}),\"\\n\",n(r.p,{children:[\"It's not important to understand -all- of this code, only the constraint - \",e(r.code,{children:\"T extends (...args: unknown[]) => unknown\"}),\". What we're saying here is that only functions which accept an arguments array of \",e(r.code,{children:\"unknown[]\"}),\" and return \",e(r.code,{children:\"unknown\"}),\" are allowed.\"]}),\"\\n\",e(r.p,{children:\"It seems to work fine for functions which have no arguments:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" myFunction\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" () \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\"log\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"Hey!\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Result\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"typeof\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" myFunction>;\"})]})]})})}),\"\\n\",e(r.p,{children:\"But it stops working as soon as we add an argument:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" myFunction\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\"log\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"Hey!\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Result\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"typeof\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" myFunction>;\"})]})]})})}),\"\\n\",n(r.p,{children:[\"In fact, it only works if we change the parameter of our function to \",e(r.code,{children:\"input: unknown\"}),\":\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" myFunction\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" unknown\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\"log\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"Hey!\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Result\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"typeof\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" myFunction>;\"})]})]})})}),\"\\n\",n(r.p,{children:[\"So accidentally, we've created a \",e(r.code,{children:\"ReturnType\"}),\" function that only works on functions which accept \",e(r.code,{children:\"unknown\"}),\" as an argument. This is not what we wanted. We wanted it to work on any function.\"]}),\"\\n\",n(r.p,{children:[\"The solution is to use \",e(r.code,{children:\"any[]\"}),\" as the type argument constraint:\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"T\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"...\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"args\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"[]) \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"> \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" T\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  ...\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"args\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"[]\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" infer\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" R\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  ?\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" R\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  :\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" never\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" myFunction\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\"log\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"Hey!\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Result\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ReturnType\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"typeof\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" myFunction>;\"})]})]})})}),\"\\n\",e(r.p,{children:\"Now it works as expected. We're declaring that we don't care what types the function accepts - it could be anything.\"}),\"\\n\",n(r.p,{children:[\"The reason this is safe is because we're deliberately declaring a wide type. We're saying \\\"I don't care what the function accepts, as long as it's a function\\\". This is a safe use of \",e(r.code,{children:\"any\"}),\".\"]}),\"\\n\",e(r.h2,{id:\"returning-conditional-types-from-generic-functions\",children:e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#returning-conditional-types-from-generic-functions\",children:\"Returning Conditional Types From Generic Functions\"})}),\"\\n\",e(r.p,{children:\"In some places, TypeScript's narrowing abilites are not as good as we'd like them to be. Let's say we want to create a function which returns different types based on a condition:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" result \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]})]})})}),\"\\n\",n(r.p,{children:[\"This function isn't really doing what we want it to. We want it to return the type \",e(r.code,{children:'\"goodbye\"'}),\" when we pass in \",e(r.code,{children:'\"hello\"'}),\". But currently, \",e(r.code,{children:\"result\"}),\" is typed as \",e(r.code,{children:'\"hello\" | \"goodbye\"'}),\".\"]}),\"\\n\",e(r.p,{children:\"We can fix this by using a conditional type:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"  input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\")\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" goodbye \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" hello \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" hello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]})]})})}),\"\\n\",n(r.p,{children:[\"We've added a conditional type to the return type of the function which mirrors our runtime logic. If \",e(r.code,{children:\"TInput\"}),\", inferred from the runtime argument input, is \",e(r.code,{children:'\"hello\"'}),\", we return \",e(r.code,{children:'\"goodbye\"'}),\". Otherwise, we return \",e(r.code,{children:'\"hello\"'}),\".\"]}),\"\\n\",e(r.p,{children:\"But there's a problem. I've deliberately disabled the errors in the snippet above. Let's see what happens when we enable them:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"  input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\")\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(r.p,{children:[\"Ouch. TypeScript doesn't seem to be matching up the conditional type with the runtime logic. \",e(r.code,{children:'\"hello\"'}),\" or \",e(r.code,{children:'\"goodbye\"'}),\" can't be returned from the function.\"]}),\"\\n\",n(r.p,{children:[\"We can fix this by using \",e(r.code,{children:\"as\"}),\", and forcing it to be the correct conditional type:\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"  input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\")\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",e(r.p,{children:\"We can make this nicer by extracting that logic to a common generic type:\"}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" YouSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"> \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"  TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"  input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\")\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" YouSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"> \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" YouSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">;\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" YouSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">;\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(r.p,{children:[\"But in these situations, it often makes more sense to use as \",e(r.code,{children:\"any\"}),\":\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),e(r.span,{style:{color:\"#50FA7B\"},children:\" youSayGoodbyeISayHello\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" |\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\">(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"  input\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\")\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" TInput\"}),e(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" ?\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" :\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" =>\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"  if\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" (input \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"===\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#F8F8F2\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"hello\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#F8F8F2\"},children:\"  } \"}),e(r.span,{style:{color:\"#FF79C6\"},children:\"else\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#FF79C6\"},children:\"    return\"}),e(r.span,{style:{color:\"#E9F284\"},children:' \"'}),e(r.span,{style:{color:\"#F1FA8C\"},children:\"goodbye\"}),e(r.span,{style:{color:\"#E9F284\"},children:'\"'}),e(r.span,{style:{color:\"#FF79C6\"},children:\" as\"}),e(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" any\"}),e(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(r.p,{children:[\"Yes, this does make our function less type-safe. We could accidentally return \",e(r.code,{children:'\"bonsoir\"'}),\" from the function instead.\"]}),\"\\n\",n(r.p,{children:[\"But in these situations, it's often better to use \",e(r.code,{children:\"as any\"}),\" and add a unit test for this function's behavior. Because of TypeScript's limitations in checking this stuff, this is often as close as you'll get to type safety.\"]}),\"\\n\",n(r.p,{children:[\"There are several other use cases like this, where inside generic functions you need to use \",e(r.code,{children:\"any\"}),\" to get around TypeScript's limitations. To me, this is fine.\"]}),\"\\n\",e(r.h2,{id:\"conclusion\",children:e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#conclusion\",children:\"Conclusion\"})}),\"\\n\",n(r.p,{children:[\"A question remains: should you ban \",e(r.code,{children:\"any\"}),\" from your codebase? I think, on balance, the answer should be yes. You should turn on the \",e(r.code,{children:\"ESLint rule\"}),\" which prevents its use, and you should avoid it wherever possible.\"]}),\"\\n\",n(r.p,{children:[\"However, there are cases where \",e(r.code,{children:\"any\"}),\" is needed. They're worth using eslint-disable to get around them. So, bookmark this article, and attach it to your PR's when you feel the need to use it.\"]})]})}return{default:function(l={}){const{wrapper:n}=l.components||{};return n?e(n,{...l,children:e(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "slugAsParams": "any-considered-harmful-except-for-these-cases"
  },
  {
    "slug": "blog/deriving-decoupling-when-not-to-be-a-typescript-wizard",
    "title": "Deriving vs Decoupling: When NOT to be a Typescript Wizard",
    "description": "In this book teaser, we discuss deriving vs decoupling your types: when building relationships between your types or segregating them makes sense",
    "date": "2024-05-30T00:00:00.000Z",
    "published": true,
    "image": "/images/blog/derive-decouple.webp",
    "author": "devbertskie",
    "body": "const{Fragment:e,jsx:l,jsxs:n}=arguments[0];function _createMdxContent(r){const a={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",p:\"p\",pre:\"pre\",span:\"span\",...r.components};return n(e,{children:[l(a.p,{children:'One of the most common pieces of advice for writing maintainable code is to \"Keep code DRY\", or more explicitly, \"Don\\'t Repeat Yourself\".'}),\"\\n\",l(a.p,{children:\"One way to do this in JavaScript is to take repeating code and capture it in functions or variables. These variables and functions can be reused, composed and combined in different ways to create new functionality.\"}),\"\\n\",l(a.p,{children:\"In TypeScript, we can apply this same principle to types.\"}),\"\\n\",l(a.h2,{id:\"what-is-a-derived-type\",children:l(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#what-is-a-derived-type\",children:\"What Is A Derived Type?\"})}),\"\\n\",l(a.p,{children:\"A derived type is a type which relies on, or inherits from, a structure of another type. We can create derived types using some of the tools we've used so far.\"}),\"\\n\",n(a.p,{children:[\"We could use \",l(a.code,{children:\"interface extends\"}),\" to make one interface inherit from another:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"interface\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Album\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  title\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  artist\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  releaseYear\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" number\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"}\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"interface\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" AlbumDetails\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Album\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  genre\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"}\"})})]})})}),\"\\n\",n(a.p,{children:[l(a.code,{children:\"AlbumDetails\"}),\" inherits all of the properties of \",l(a.code,{children:\"Album\"}),\". This means that any changes to \",l(a.code,{children:\"Album\"}),\" will trickle down to \",l(a.code,{children:\"AlbumDetails\"}),\". \",l(a.code,{children:\"AlbumDetails\"}),\" is derived from \",l(a.code,{children:\"Album\"}),\".\"]}),\"\\n\",l(a.p,{children:\"Another example is a union type.\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Triangle\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  type\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"triangle\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  sideLength\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" number\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Rectangle\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  type\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"rectangle\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  width\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" number\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  height\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" number\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Shape\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Triangle\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" |\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Rectangle\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]})]})})}),\"\\n\",n(a.p,{children:[\"A derived type represents a relationship. That relationship is one-way. \",l(a.code,{children:\"Shape\"}),\" can't go back and modify \",l(a.code,{children:\"Triangle\"}),\" or \",l(a.code,{children:\"Rectangle\"}),\". But any changes to \",l(a.code,{children:\"Triangle\"}),\" and \",l(a.code,{children:\"Rectangle\"}),\" will ripple through to \",l(a.code,{children:\"Shape\"}),\".\"]}),\"\\n\",l(a.h2,{id:\"deriving-vs-decoupling\",children:l(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#deriving-vs-decoupling\",children:\"Deriving vs Decoupling\"})}),\"\\n\",l(a.p,{children:\"When you derive a type from a source, you're coupling the derived type to that source. If you derive a type from another derived type, this can create long chains of coupling throughout your app that can be hard to manage.\"}),\"\\n\",l(a.h3,{id:\"when-decoupling-makes-sense\",children:l(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#when-decoupling-makes-sense\",children:\"When Decoupling Makes Sense\"})}),\"\\n\",n(a.p,{children:[\"Let's imagine we have a \",l(a.code,{children:\"User\"}),\" type in a \",l(a.code,{children:\"db.ts\"}),\" file:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"export\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" User\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  id\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  name\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  imageUrl\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  email\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(a.p,{children:[\"We'll say for this example that we're using a component-based framework like React, Vue or Svelte. We have a \",l(a.code,{children:\"AvatarImage\"}),\" component that renders an image of the user. We could pass in the \",l(a.code,{children:\"User\"}),\" type directly:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"import\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" { User } \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"from\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"./db\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"export\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" const\"}),l(a.span,{style:{color:\"#50FA7B\"},children:\" AvatarImage\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),l(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"props\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" { user\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" User\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" }) \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"  return\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"img\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" src\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\"={\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"props\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\".\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"user\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\".imageUrl} \"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"alt\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\"={\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"props\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\".\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"user\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\".name} />;\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(a.p,{children:[\"But as it turns out, we're only using the \",l(a.code,{children:\"imageUrl\"}),\" and \",l(a.code,{children:\"name\"}),\" properties from the \",l(a.code,{children:\"User\"}),\" type. It's a good idea to make your functions and components only require the data they need to run. This helps prevent you from passing around unnecessary data.\"]}),\"\\n\",n(a.p,{children:[\"Let's try deriving. We'll create a new type called \",l(a.code,{children:\"AvatarImageProps\"}),\" that only includes the properties we need:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"import\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" { User } \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"from\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"./db\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" AvatarImageProps\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Pick\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),l(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"User\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\", \"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"imageUrl\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#FF79C6\"},children:\" |\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"name\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\">;\"})]})]})})}),\"\\n\",n(a.p,{children:[\"But let's think for a moment. We've now coupled the \",l(a.code,{children:\"AvatarImageProps\"}),\" type to the User type. \",l(a.code,{children:\"AvatarImageProps\"}),\" now not only depends on the shape of \",l(a.code,{children:\"User\"}),\", but its existence in the \",l(a.code,{children:\"db.ts\"}),\" file. This means if we ever move the location of the \",l(a.code,{children:\"User\"}),\" type, or split it into separate interfaces, we'll need to think about AvatarImageProps.\"]}),\"\\n\",n(a.p,{children:[\"Let's try the other way around. Instead of deriving AvatarImageProps from \",l(a.code,{children:\"User\"}),\", we'll decouple them. We'll create a new type which just has the properties we need:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" AvatarImageProps\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  imageUrl\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  name\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",n(a.p,{children:[\"Now, \",l(a.code,{children:\"AvatarImageProps\"}),\" is decoupled from \",l(a.code,{children:\"User\"}),\". We can move \",l(a.code,{children:\"User\"}),\" around, split it into separate interfaces, or even delete it, and \",l(a.code,{children:\"AvatarImageProps\"}),\" will be unaffected.\"]}),\"\\n\",n(a.p,{children:[\"In this particular case, decoupling feels like the right choice. This is because \",l(a.code,{children:\"User\"}),\" and \",l(a.code,{children:\"AvatarImage\"}),\" are separate concerns. \",l(a.code,{children:\"User\"}),\" is a data type, while \",l(a.code,{children:\"AvatarImage\"}),\" is a UI component. They have different responsibilities and different reasons to change. By decoupling them, AvatarImage becomes more portable and easier to maintain.\"]}),\"\\n\",n(a.p,{children:[\"What can make decoupling a difficult decision is that deriving can make you feel 'clever'. \",l(a.code,{children:\"Pick\"}),\" tempts us because it uses a more advanced feature of TypeScript, which makes us feel good for applying the knowledge we've gained. But often, it's smarter to do the simple thing, and keep your types decoupled.\"]}),\"\\n\",l(a.h2,{id:\"when-deriving-makes-sense\",children:l(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#when-deriving-makes-sense\",children:\"When Deriving Makes Sense\"})}),\"\\n\",n(a.p,{children:[\"Deriving makes most sense when the code you're coupling shares a common concern. The examples in this chapter are good examples of this. Our \",l(a.code,{children:\"as const\"}),\" object, for instance:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"const\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" albumTypes \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"=\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  CD\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"cd\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  VINYL\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"vinyl\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  DIGITAL\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"digital\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"} \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"as\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" const\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" AlbumType\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"typeof\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" albumTypes)[\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"keyof\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" typeof\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" albumTypes];\"})]})]})})}),\"\\n\",n(a.p,{children:[\"Here, \",l(a.code,{children:\"AlbumType\"}),\" is derived from \",l(a.code,{children:\"albumTypes\"}),\". If we were to decouple it, we'd have to maintain two closely related sources of truth:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" AlbumType\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"cd\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#FF79C6\"},children:\" |\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"vinyl\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#FF79C6\"},children:\" |\"}),l(a.span,{style:{color:\"#E9F284\"},children:' \"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"digital\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]})})})}),\"\\n\",n(a.p,{children:[\"Because both \",l(a.code,{children:\"AlbumType\"}),\" and \",l(a.code,{children:\"albumTypes\"}),\" are closely related, deriving AlbumType from \",l(a.code,{children:\"albumTypes\"}),\" makes sense.\"]}),\"\\n\",n(a.p,{children:[\"Another example is when one type is directly related to another. For instance, our \",l(a.code,{children:\"User\"}),\" type might have a \",l(a.code,{children:\"UserWithoutId\"}),\" type derived from it:\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" User\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  id\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  name\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  imageUrl\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#F8F8F2\"},children:\"  email\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"type\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" UserWithoutId\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" Omit\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),l(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"User\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\", \"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F1FA8C\"},children:\"id\"}),l(a.span,{style:{color:\"#E9F284\"},children:'\"'}),l(a.span,{style:{color:\"#F8F8F2\"},children:\">;\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#FF79C6\"},children:\"const\"}),l(a.span,{style:{color:\"#50FA7B\"},children:\" updateUser\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),l(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"id\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\", \"}),l(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"user\"}),l(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),l(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" UserWithoutId\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\") \"}),l(a.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),l(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#6272A4\"},children:\"  // ...\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",l(a.p,{children:\"Again, these concerns are closely related. Decoupling them would make our code harder to maintain and introduce more busywork into our codebase.\"}),\"\\n\",l(a.p,{children:\"The decision to derive or decouple is all about reducing your future workload.\"}),\"\\n\",l(a.p,{children:\"Are the two types so related that updates to one will need to ripple to the other? Derive.\"}),\"\\n\",l(a.p,{children:\"Are they so unrelated that coupling them could result in more work down the line? Decouple.\"})]})}return{default:function(e={}){const{wrapper:n}=e.components||{};return n?l(n,{...e,children:l(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "slugAsParams": "deriving-decoupling-when-not-to-be-a-typescript-wizard"
  },
  {
    "slug": "blog/how-to-strongly-type-process-env",
    "title": "How to Strongly type process.env",
    "description": "Learn how to strongly type process.env in Typescript by either augmentng global type or validating it at runtime with t3-env.",
    "date": "2024-05-30T00:00:00.000Z",
    "published": true,
    "image": "/images/blog/how-to-type-env.webp",
    "author": "devbertskie",
    "body": "const{Fragment:e,jsx:n,jsxs:l}=arguments[0];function _createMdxContent(r){const a={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",p:\"p\",pre:\"pre\",span:\"span\",...r.components};return l(e,{children:[n(a.p,{children:\"A common problem in TypeScript is that process.env doesn't give you autocomplete for the environment variables that actually exist in your system:\"}),\"\\n\",n(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"console.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"log\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(process.env.\"}),n(a.span,{style:{color:\"#BD93F9\"},children:\"MY_ENV_VARIABLE\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"); \"}),n(a.span,{style:{color:\"#6272A4\"},children:\"// No autocomplete\"})]})})})}),\"\\n\",l(a.p,{children:[\"They also end up typed as \",n(a.code,{children:\"string | undefined\"}),\", which can be annoying if you're passing them into functions that expect a string:\"]}),\"\\n\",n(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"const\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\" myFunc\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\" =\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" (\"}),n(a.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"envVar\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\") \"}),n(a.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"log\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(envVar.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"toUpperCase\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"());\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"};\"})}),\"\\n\",n(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#50FA7B\"},children:\"myFunc\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(process.env.\"}),n(a.span,{style:{color:\"#BD93F9\"},children:\"MY_ENV_VARIABLE\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\");\"})]})]})})}),\"\\n\",l(a.p,{children:[\"Here are a few ways to strongly type \",n(a.code,{children:\"process.env\"}),\":\"]}),\"\\n\",n(a.h2,{id:\"solution-1-augment-the-global-typescript\",children:n(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#solution-1-augment-the-global-typescript\",children:\"Solution 1: Augment the Global Typescript\"})}),\"\\n\",n(a.p,{children:\"You can augment the global type NodeJS.ProcessEnv to include your environment variables:\"}),\"\\n\",n(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#6272A4\"},children:\"// globals.d.ts\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"namespace\"}),n(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" NodeJS\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"  interface\"}),n(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ProcessEnv\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"    MY_ENV_VARIABLE\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"  }\"})}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"}\"})})]})})}),\"\\n\",l(a.p,{children:[\"This relies on declaration merging on the global interface \",n(a.code,{children:\"NodeJS.ProcessEnv\"}),\", adding an extra property MY_ENV_VARIABLE.\"]}),\"\\n\",n(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:n(a.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#50FA7B\"},children:\"myFunc\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(process.env.\"}),n(a.span,{style:{color:\"#BD93F9\"},children:\"MY_ENV_VARIABLE\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\");\"})]})})})}),\"\\n\",n(a.p,{children:\"However, this doesn't provide any guarantees that the environment variable actually exists in your system.\"}),\"\\n\",n(a.p,{children:\"This means that it's useful when you have relatively few environment variables, or can't get buy-in to add an extra library for checking them.\"}),\"\\n\",n(a.h2,{id:\"solution-2-validate-it-at-runtime-with-t3-env\",children:l(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#solution-2-validate-it-at-runtime-with-t3-env\",children:[\"Solution 2: Validate it at Runtime with \",n(a.code,{children:\"t3-env\"})]})}),\"\\n\",l(a.p,{children:[\"If you want to validate that all your environment variables are present at runtime, you can use a library like \",n(a.code,{children:\"t3-env\"}),\".\"]}),\"\\n\",n(a.p,{children:\"This leverages zod to validate your environment variables at runtime. Here's an example\"}),\"\\n\",n(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(a.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"dracula\",children:l(a.code,{\"data-language\":\"js\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"import\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" { createEnv } \"}),n(a.span,{style:{color:\"#FF79C6\"},children:\"from\"}),n(a.span,{style:{color:\"#E9F284\"},children:' \"'}),n(a.span,{style:{color:\"#F1FA8C\"},children:\"@t3-oss/env-core\"}),n(a.span,{style:{color:\"#E9F284\"},children:'\"'}),n(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"import\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" { z } \"}),n(a.span,{style:{color:\"#FF79C6\"},children:\"from\"}),n(a.span,{style:{color:\"#E9F284\"},children:' \"'}),n(a.span,{style:{color:\"#F1FA8C\"},children:\"zod\"}),n(a.span,{style:{color:\"#E9F284\"},children:'\"'}),n(a.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#FF79C6\"},children:\"export\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\" const\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" env \"}),n(a.span,{style:{color:\"#FF79C6\"},children:\"=\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\" createEnv\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"({\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"  server\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"    DATABASE_URL\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" z.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"string\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"().\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"url\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(),\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"    OPEN_AI_API_KEY\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" z.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"string\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"().\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"min\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),n(a.span,{style:{color:\"#BD93F9\"},children:\"1\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"),\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"  },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"  clientPrefix\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#E9F284\"},children:' \"'}),n(a.span,{style:{color:\"#F1FA8C\"},children:\"PUBLIC_\"}),n(a.span,{style:{color:\"#E9F284\"},children:'\"'}),n(a.span,{style:{color:\"#F8F8F2\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"  client\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"    PUBLIC_CLERK_PUBLISHABLE_KEY\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" z.\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"string\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"().\"}),n(a.span,{style:{color:\"#50FA7B\"},children:\"min\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"(\"}),n(a.span,{style:{color:\"#BD93F9\"},children:\"1\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\"),\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"  },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[n(a.span,{style:{color:\"#F8F8F2\"},children:\"  runtimeEnv\"}),n(a.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(a.span,{style:{color:\"#F8F8F2\"},children:\" process.env,\"})]}),\"\\n\",n(a.span,{\"data-line\":\"\",children:n(a.span,{style:{color:\"#F8F8F2\"},children:\"});\"})})]})})}),\"\\n\",l(a.p,{children:[\"This will fail at runtime if any of the environment variables are missing or don't match the schema. It also means you can leverage Zod's powerful validation capabilities, such as \",n(a.code,{children:\".url()\"}),\" or \",n(a.code,{children:\".min(1)\"}),\" for strings.\"]}),\"\\n\",l(a.p,{children:[\"It also provides a single source of truth for your environment variables - \",n(a.code,{children:\"env\"}),\". This means you can use \",n(a.code,{children:\"env\"}),\" throughout your codebase, and you'll get autocomplete and type-checking for your environment variables.\"]}),\"\\n\",l(a.p,{children:[\"Here's a \",n(a.a,{href:\"https://env.t3.gg/docs/core\",children:\"great guide\"}),\" you can use to get started.\"]}),\"\\n\",n(a.h2,{id:\"which-solution-should-you-use\",children:n(a.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#which-solution-should-you-use\",children:\"Which Solution Should You Use?\"})}),\"\\n\",n(a.p,{children:\"If your project is small and you don't want to add extra dependencies, augmenting the global type is a good solution.\"}),\"\\n\",l(a.p,{children:[\"But if you're remotely concerned about missing environment variables at runtime, \",n(a.code,{children:\"t3-env\"}),\" is a great choice.\"]})]})}return{default:function(e={}){const{wrapper:l}=e.components||{};return l?n(l,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "slugAsParams": "how-to-strongly-type-process-env"
  },
  {
    "slug": "blog/this-pattern-will-wreck-your-react-apps-ts-performance",
    "title": "This pattern will wreck your React App's TS Performance",
    "description": "Imporve React Typescript performance by replacing type & with interface extends. Boost IDE and tsc speed significantly",
    "date": "2024-05-30T00:00:00.000Z",
    "published": true,
    "image": "/images/blog/extends.webp",
    "author": "devbertskie",
    "body": "const{Fragment:e,jsx:n,jsxs:l}=arguments[0];function _createMdxContent(t){const r={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",p:\"p\",pre:\"pre\",span:\"span\",...t.components};return l(e,{children:[l(r.p,{children:[\"A couple of years ago, Sentry were having big problems with their React app. They'd pretty recently \",n(r.a,{href:\"https://blog.sentry.io/slow-and-steady-converting-sentrys-entire-frontend-to-typescript\",children:\"migrated it to TypeScript\"}),\" from JavaScript. And the app was part of a large monorepo.\"]}),\"\\n\",l(r.p,{children:[\"But the IDE performance was slow. You'd often need to wait a couple of seconds after making a change for the TypeScript language server to update. And running \",n(r.code,{children:\"tsc\"}),\" would take a long time.\"]}),\"\\n\",n(r.p,{children:\"Now, this isn't unusual for a large TypeScript codebase. But the Sentry team had a hunch that something was wrong. The problem felt out of proportion to the size of the codebase.\"}),\"\\n\",l(r.p,{children:[\"It turned out that the issue, outlined by \",n(r.a,{href:\"https://twitter.com/JonasBadalic/status/1765006152150974919\",children:\"Jonas\"}),\", was down to a single pattern.\"]}),\"\\n\",n(r.h2,{id:\"how-to-tank-your-react-apps-ts-performance\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#how-to-tank-your-react-apps-ts-performance\",children:\"How To Tank Your React App's TS Performance\"})}),\"\\n\",l(r.p,{children:[\"In tons of places in Sentry's codebase, they were extending HTML types in React. For instance, defining \",n(r.code,{children:\"ButtonProps\"}),\" would look like this:\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"import\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" React \"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"from\"}),n(r.span,{style:{color:\"#E9F284\"},children:' \"'}),n(r.span,{style:{color:\"#F1FA8C\"},children:\"react\"}),n(r.span,{style:{color:\"#E9F284\"},children:'\"'}),n(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"type\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ButtonProps\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\" =\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"  React\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\".\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"HTMLAttributes\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),n(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"HTMLButtonElement\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"> \"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"&\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"    extraProp\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F8F8F2\"},children:\"  };\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"const\"}),n(r.span,{style:{color:\"#50FA7B\"},children:\" Button\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\" =\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" ({ \"}),n(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"extraProp\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\", \"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"...\"}),n(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"props\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" }\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ButtonProps\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\") \"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"=>\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"  console.\"}),n(r.span,{style:{color:\"#50FA7B\"},children:\"log\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"(extraProp);\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"  return\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" <\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"button\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" {\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"...\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"props\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"} />;\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F8F8F2\"},children:\"};\"})})]})})}),\"\\n\",l(r.p,{children:[\"This means that you could pass in all the props that a \",n(r.code,{children:\"<button>\"}),\" element could take, plus an \",n(r.code,{children:\"extraProp\"}),\":\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"<\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"Button\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"  extraProp\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),n(r.span,{style:{color:\"#E9F284\"},children:'\"'}),n(r.span,{style:{color:\"#F1FA8C\"},children:\"whatever\"}),n(r.span,{style:{color:\"#E9F284\"},children:'\"'})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"  onClick\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"=\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"{(e) => {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"(parameter) e: React.MouseEvent\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"<\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"HTMLButtonElement, MouseEvent\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\">\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F8F8F2\"},children:\"  }}\"})}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"/>\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]})]})})}),\"\\n\",l(r.p,{children:[\"But it turns out that this pattern is devilishly slow. So Jonas, following the advice of the \",n(r.a,{href:\"https://github.com/microsoft/TypeScript/wiki/Performance\",children:\"TypeScript Performance Wiki\"}),\", changed each of these to use an \",n(r.code,{children:\"interface\"}),\" instead:\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#282A36\",color:\"#F8F8F2\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"dracula\",children:l(r.code,{\"data-language\":\"ts\",\"data-theme\":\"dracula\",style:{display:\"grid\"},children:[l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"import\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\" React \"}),n(r.span,{style:{color:\"#FF79C6\"},children:\"from\"}),n(r.span,{style:{color:\"#E9F284\"},children:' \"'}),n(r.span,{style:{color:\"#F1FA8C\"},children:\"react\"}),n(r.span,{style:{color:\"#E9F284\"},children:'\"'}),n(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#FF79C6\"},children:\"interface\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" ButtonProps\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\" extends\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" React\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\".\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\"HTMLAttributes\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"<\"}),n(r.span,{style:{color:\"#FFB86C\",fontStyle:\"italic\"},children:\"HTMLButtonElement\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\"> {\"})]}),\"\\n\",l(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#F8F8F2\"},children:\"  extraProp\"}),n(r.span,{style:{color:\"#FF79C6\"},children:\":\"}),n(r.span,{style:{color:\"#8BE9FD\",fontStyle:\"italic\"},children:\" string\"}),n(r.span,{style:{color:\"#F8F8F2\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#F8F8F2\"},children:\"}\"})})]})})}),\"\\n\",n(r.p,{children:\"Suddenly, things got a lot snappier. The TypeScript language server was faster, and tsc ran quicker. Just from a little syntax change. Why?\"}),\"\\n\",n(r.h2,{id:\"why-did-this-happens\",children:n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#why-did-this-happens\",children:\"Why did this happens\"})}),\"\\n\",l(r.p,{children:[\"You may have heard that \",n(r.code,{children:\"interface\"}),\" is slightly faster than \",n(r.code,{children:\"type\"}),\". This is not quite true. In fact, \",n(r.code,{children:\"interface extends\"}),\" is slightly faster than \",n(r.code,{children:\"&\"}),\".\"]}),\"\\n\",l(r.p,{children:[\"In an earlier version of this article, I'd posted an explanation based on some fuzzy thinking which, thanks to my old colleague \",n(r.a,{href:\"https://twitter.com/AndaristRake\",children:\"Mateusz Burzyński\"}),\", I now understand was wrong.\"]}),\"\\n\",l(r.p,{children:[\"The problem is more complex than I realised - check out \",n(r.a,{href:\"https://twitter.com/AndaristRake/status/1770743549325115459\",children:\"this thread\"}),\" for his critiques and our investigations.\"]}),\"\\n\",n(r.p,{children:\"Hopefully, I can update this article again with a definitive description of why this happens - but nothing is simple when it comes to TypeScript performance.\"}),\"\\n\",l(r.p,{children:[\"Suffice to say - \",n(r.code,{children:\"interface extends\"}),\" is generally faster than \",n(r.code,{children:\"&\"}),\", and so it proved in this case too.\"]})]})}return{default:function(e={}){const{wrapper:l}=e.components||{};return l?n(l,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "slugAsParams": "this-pattern-will-wreck-your-react-apps-ts-performance"
  }
]